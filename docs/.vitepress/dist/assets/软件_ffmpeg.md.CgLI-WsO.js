import{_ as a,c as s,o as e,a4 as i}from"./chunks/framework.4aTu-Nia.js";const m=JSON.parse('{"title":"","description":"","frontmatter":{},"headers":[],"relativePath":"软件/ffmpeg.md","filePath":"软件/ffmpeg.md","lastUpdated":1712116768000}'),p={name:"软件/ffmpeg.md"},t=i(`<p><a href="https://crifan.github.io/media_process_ffmpeg/website/video_process/property/get/" target="_blank" rel="noreferrer">https://crifan.github.io/media_process_ffmpeg/website/video_process/property/get/</a></p><h2 id="安装ffmpeg" tabindex="-1">安装ffmpeg <a class="header-anchor" href="#安装ffmpeg" aria-label="Permalink to &quot;安装ffmpeg&quot;">​</a></h2><h3 id="在macos上安装" tabindex="-1">在macos上安装 <a class="header-anchor" href="#在macos上安装" aria-label="Permalink to &quot;在macos上安装&quot;">​</a></h3><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>brew install ffmpeg</span></span></code></pre></div><h2 id="ffmpeg使用技巧" tabindex="-1">ffmpeg使用技巧 <a class="header-anchor" href="#ffmpeg使用技巧" aria-label="Permalink to &quot;ffmpeg使用技巧&quot;">​</a></h2><h3 id="剪辑视频的特定时间段-例如从5分钟到15分钟" tabindex="-1">剪辑视频的特定时间段，例如从5分钟到15分钟 <a class="header-anchor" href="#剪辑视频的特定时间段-例如从5分钟到15分钟" aria-label="Permalink to &quot;剪辑视频的特定时间段，例如从5分钟到15分钟&quot;">​</a></h3><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>ffmpeg -i 1.mp4 -ss 00:05:00 -to 00:15:00 -c copy o1.mp4</span></span></code></pre></div><p>这里的命令参数解释如下：</p><ul><li>-i input.mp4 表示输入文件。</li><li>-ss 00:05:00 定位到视频的开始时间点，即5分钟处。</li><li>-to 00:15:00 定位到视频的结束时间点，即15分钟处。</li><li>-c copy 表示复制视频和音频流而不重新编码。</li><li>output.mp4 是剪辑后生成的输出文件。</li></ul><h3 id="去水印" tabindex="-1">去水印 <a class="header-anchor" href="#去水印" aria-label="Permalink to &quot;去水印&quot;">​</a></h3><p>定位水印位置</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ffplay</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> lavfi</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -i</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;movie=o1.mp4,delogo=x=15:y=1:w=149:h=54:show=1&quot;</span></span></code></pre></div><p>去除B站月圆之夜录屏水印</p><p>592*1280尺寸</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ffmpeg</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -i</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> o1.mp4</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -filter_complex</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;[0:v]delogo=x=15:y=1:w=149:h=54&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -c:a</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> copy</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> p1.mp4</span></span></code></pre></div><p>396*854尺寸</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>ffmpeg -i o1.mp4 -filter_complex &quot;[0:v]delogo=x=12:y=1:w=98:h=33&quot; -c:a copy p1.mp4</span></span></code></pre></div><h3 id="使用crop滤镜来剪裁掉包含水印的区域" tabindex="-1">使用crop滤镜来剪裁掉包含水印的区域 <a class="header-anchor" href="#使用crop滤镜来剪裁掉包含水印的区域" aria-label="Permalink to &quot;使用crop滤镜来剪裁掉包含水印的区域&quot;">​</a></h3><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>ffmpeg -i input.mp4 -vf &quot;crop=out_w:out_h:x:y&quot; output.mp4</span></span></code></pre></div><p>这里的参数解释如下：</p><ul><li>input.mp4 是您的原始视频文件。</li><li>out_w 是剪裁后视频的宽度，通常与原视频宽度相同。</li><li>out_h 是剪裁后视频的高度，应该是原视频高度减去水印区域的高度。</li><li>x 是剪裁区域左上角的横坐标，对于顶部水印通常为0。</li><li>y 是剪裁区域左上角的纵坐标，对于顶部水印也通常为0。</li><li>output.mp4 是剪裁后生成的视频文件。</li></ul><p>例如，如果您的视频尺寸是1920x1080，水印高度大约是50像素，那么命令可能如下：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>ffmpeg -i input.mp4 -vf &quot;crop=1920:1030:0:50&quot; output.mp4</span></span></code></pre></div><p>这个命令将视频的最上方50像素高度的部分剪掉，保留下方的1030像素高度的内容。</p><h3 id="画音合并" tabindex="-1">画音合并 <a class="header-anchor" href="#画音合并" aria-label="Permalink to &quot;画音合并&quot;">​</a></h3><p>使用<code>脚本猫</code>下载bilibili的脚本，下载后的文件是画音分离的，所以还需要使用ffmpeg进行合并</p><p>将以下代码保存为<code>hebing.sh</code></p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span># 遍历当前文件夹，将所有mp4格式文件与同名m4a文件进行合并，合并后的文件名加上_merged</span></span>
<span class="line"><span>for video_file in *.mp4; do</span></span>
<span class="line"><span>    audio_file=&quot;\${video_file%.mp4}.m4a&quot;</span></span>
<span class="line"><span>    output_file=&quot;\${video_file%.mp4}_merged.mp4&quot;</span></span>
<span class="line"><span>    ffmpeg -i &quot;$video_file&quot; -i &quot;$audio_file&quot; -vcodec copy -acodec copy &quot;$output_file&quot;</span></span>
<span class="line"><span>done</span></span></code></pre></div><p>给脚本授权</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>chmod 777 hebing.sh</span></span></code></pre></div><p>运行脚本</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>./hebing.sh</span></span></code></pre></div>`,32),l=[t];function o(n,h,c,d,r,u){return e(),s("div",null,l)}const f=a(p,[["render",o]]);export{m as __pageData,f as default};
